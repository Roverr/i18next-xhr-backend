!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.i18nextXHRBackend=n()}(this,function(){"use strict";function t(t){for(var n=arguments.length,e=Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return r.call(e,function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t}function n(t,n,e){var o="GET";e&&(o="POST"),t.open(o,n,1)}function e(t,e,o,i,r){var s="object"===("undefined"==typeof i?"undefined":a(i)),u=i&&s,l=i&&JSON.parse(JSON.stringify(i));if(u){var c="";for(var f in i)c+="&"+encodeURIComponent(f)+"="+encodeURIComponent(l[f]);l=c.slice(1),r||(l+="&_t="+new Date)}try{!function(){var r=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");n(r,t,l),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),i&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){var t=r.readyState>3;return t&&o?o(r.responseText,r):null},r.send(i)}()}catch(t){if(window.console)return console.error(t)}return null}function o(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:e}}var i=[],r=i.forEach,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),l=function(){function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];s(this,n),this.init(t,e),this.type="backend"}return u(n,[{key:"init",value:function(n){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=n,this.options=t(e,this.options||{},o())}},{key:"readMulti",value:function(t,n,e){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath(t,n));var i=this.services.interpolator.interpolate(o,{lng:t.join("+"),ns:n.join("+")});this.loadUrl(i,e)}},{key:"read",value:function(t,n,e){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath([t],[n]));var i=this.services.interpolator.interpolate(o,{lng:t,ns:n});this.loadUrl(i,e)}},{key:"loadUrl",value:function(t,n){var e=this;this.options.ajax(t,this.options,function(o,i){if(i.status>=500&&i.status<600)return n("failed loading "+t,!0);if(i.status>=400&&i.status<500)return n("failed loading "+t,!1);var r=void 0;try{r=e.options.parse(o,t)}catch(e){var a="failed parsing "+t+" to json";return n(a,!1)}return n(null,r)})}},{key:"create",value:function(t,n,e,o){var i=this,r=t;"string"==typeof t&&(r=[t]);var a={};a[e]=o||"",r.forEach(function(t){var e={lng:t,ns:n},o=i.services.interpolator.interpolate(i.options.addPath,e);i.options.ajax(o,i.options,function(t,n){},a)})}}]),n}();return l.type="backend",l});